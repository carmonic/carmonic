<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mechanic</title>
</head>
<body>
<!-- Load socket.io client library -->
<script src="http://localhost:3000/socket.io/socket.io.js"></script>
<script
        src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>

<script type="text/javascript">
    var socket = io.connect('http://localhost:3000');
    socket.on('connect', function () {
        console.log('Mechanic has connected to the server!');
    });
    socket.on('job', function (customerId) {
        console.log('Mechanic has received a job from ' + customerId);
        $('h4.notification').text("You have received a job from " + customerId);
        $('h4.notification').show();
    });
    //socket.emit('mechanic_register', 'rand_mechanic_id');
    $(document).ready(function() {
        $('#loginForm').submit(function (e) {
            e.preventDefault();
            var mechanicUsername = $('#loginForm').find('input[name="mechanicUsername"]').val();
            socket.emit('mechanic_register', mechanicUsername);
            console.log("Mechanic has registered");
            return true;
        });
    });
</script>

<h1>Hello Mechanic</h1>
<form id="loginForm" action="" method="get">
    First name:<br>
    <input type="text" name="mechanicUsername"><br>
    <input type="submit" value="Login" />
</form>
<h4 id="notification" style="display:none"></h4>
<div id="map">
    <!-- We will load a map here later-->
</div>
</body>
</html>